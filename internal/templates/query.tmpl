{{define "gqlQueryFile" -}}
# Code generated by sqlc. DO NOT EDIT.
{{if not .OmitSqlcVersion}}# versions:
#   sqlc {{.SqlcVersion}}
{{end}}# source: {{.SourceName}}
{{template "gqlQuery" . }}
{{- template "gqlInputTypes" . -}}
{{end}}

{{define "gqlQuery"}}
    {{- /*gotype:github.com/debugger84/sqlc-graphql/internal.gqlTmplCtx*/ -}}
    {{- range .ExtendedTypes -}}
        {{- $currentExtendedType := . }}
extend type {{.}} {
            {{- range $.GoQueries -}}
                {{- if ne $currentExtendedType .ExtendedType -}}
                    {{- continue -}}
                {{- end -}}
{{- if .Comments}}
    """
    {{ range .Comments -}}
        {{.}}
    {{ end -}}
    """
{{- end -}}
{{- if eq .Cmd ":one"}}
    {{lowerTitle .ResolverName}}{{ if .Arg.Pair }}({{.Arg.Pair}}){{ end }}: {{.Ret.DefineType}}
{{- end -}}
{{- if eq .Cmd ":many"}}
    {{lowerTitle .ResolverName}}{{ if .Arg.Pair }}({{.Arg.Pair}}){{ end }}: {{.ReturnedType}}
{{- end -}}
{{- if eq .Cmd ":exec"}}
    {{lowerTitle .ResolverName}}{{ if .Arg.Pair }}({{.Arg.Pair}}){{ end }}: Boolean!
{{- end -}}
{{- if eq .Cmd ":execrows"}}
    {{lowerTitle .ResolverName}}{{ if .Arg.Pair }}({{.Arg.Pair}}){{ end }}: Int!
{{- end -}}
            {{- end }}
}
    {{- end}}
{{end}}

{{define "gqlInputTypes" -}}
    {{- range .GoQueries }}
        {{- /*gotype:github.com/debugger84/sqlc-graphql/internal.Query*/ -}}
        {{- if $.OutputQuery .SourceName -}}
            {{- if ne (hasPrefix .Cmd ":batch") true -}}
                {{- if .Arg.EmitStruct}}
input {{.Arg.DefineType}} @goModel(model: "{{.Arg.ModelPath}}") {
{{- range .Arg.Struct.Fields }}
    {{lowerTitle .Name}}: {{.Type}} {{if .Directive}}{{.Directive}}{{end}}
{{- end}}
}
                {{- end -}}
            {{- end }}
        {{- end -}}
    {{ end }}
{{end}}
